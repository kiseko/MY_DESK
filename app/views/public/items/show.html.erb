<div class="container">

  <div class="item-detail">

    <div class="item-visual">

      <% @item_pictures.each do |item_picture| %>
        <div class="main-picture-area">
          <%= attachment_image_tag item_picture, :image, :fill, 600, 600, format: "jpg", class: "main-picture" %>
          <%= link_to "アイテム画像の変更", edit_item_item_picture_path(@item.id, item_picture.id), data: {"turbolinks" => false}, class: "set-picture-link" %>
        </div>
      <% end %>

      <div class="thumbnail-area">
        <% @item_pictures.each do |item_picture| %>
          <div class="thumb-box">
            <div class="thumb-border">
              <%= attachment_image_tag item_picture, :image, :fill, 125, 125, format: "jpg", class: "thumbnail" %>
              <%= link_to item_item_picture_path(@item.id, item_picture.id), method: :delete do %>
                <button type="button" class="delete-button">
                  <div class="cross-mark"></div>
                </button>
              <% end %>
            </div>
          </div>
        <% end %>
        <% if @item_pictures.count < 4 %>
          <div class="thumb-box">
            <div class="thumb-border">
              <%= link_to new_item_item_picture_path(@item.id), data: {"turbolinks" => false}, class: "new-picture-link" do %>
                <div class=plus-mark></div>
                <div class="center-button">
                  <i class="fas fa-image image-icon"></i>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>

    </div>

    <div class="item-information">

      <div class="item-information-content">

        <h3><%= @item.brand %></h3>
        <h2><%= @item.name %></h2>

        <div class="genre-index">
          <% @genres.each do |genre| %>
            <div class="genre-content">
              <div class="genre-frame">
                <p class="genre-name"><%= genre.name %></p>
              </div>
              <div class="link-layout">
                <%= link_to item_genre_path(@item.id, genre.id), method: :delete do %>
                  <button type="button" class="delete-button">
                    <div class="cross-mark"></div>
                  </button>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>

        <%= form_with model: @genre, url: item_genres_path(@item.id), local: true do |f| %>
          <div class="genre-form">
            <%= f.text_field :name, class: "genre-input-box" %>
            <div class="link-layout">
              <button type="submit" class="circle-plus-button">
                <div class="plus-mark-mini"></div>
              </button>
            </div>
          </div>
        <% end %>

        <div class="set-link right-button">
          <%= link_to "アイテム情報の編集", edit_item_path(@item.id), class: "underline-button" %>
        </div>

        <% if @homepage_link.present? %>
          <%= link_to @homepage_link.url, class: "icon-link-button" do %>
            <div class="item-link">
              <i class="fas fa-home link-icon"></i>
              <p><%= @homepage_link.url %></p>
            </div>
          <% end %>
        <% end %>

        <% if @amazon_link.present? %>
          <%= link_to @amazon_link.url, class: "icon-link-button" do %>
            <div class="item-link">
              <i class="fab fa-amazon link-icon"></i>
              <p><%= @amazon_link.url %></p>
            </div>
          <% end %>
        <% end %>

        <div class="set-link right-button">
          <%= link_to "アイテムリンクの設定", link_item_path(@item.id), class: "underline-button" %>
        </div>

      </div>

      <% if @review.present? %>
        <div class="item-information-content">
          <div class="rating-star">
            <% if @review.rating == 1 %>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star gray-star"></i>
              <i class="fas fa-star gray-star"></i>
              <i class="fas fa-star gray-star"></i>
              <i class="fas fa-star gray-star"></i>
            <% elsif @review.rating == 2 %>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star gray-star"></i>
              <i class="fas fa-stargray- star"></i>
              <i class="fas fa-star gray-star"></i>
            <% elsif @review.rating == 3 %>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star gray-star"></i>
              <i class="fas fa-star gray-star"></i>
            <% elsif @review.rating == 4 %>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star gray-star"></i>
            <% elsif @review.rating == 5 %>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star star"></i>
              <i class="fas fa-star star"></i>
            <% end %>
          </div>
          <p class="description-text">
            <%= @review.description %>
          </p>
          <div class="set-link right-button">
            <%= link_to "レビューの編集", edit_item_review_path(@item.id), data: {"turbolinks" => false}, class: "underline-button" %>
          </div>
          <div class="right-button">
            <i class="fas fa-trash-alt link-icon"></i>
          </div>
        </div>
      <% else %>
        <div class="item-information-content center-button">
          <%= link_to new_item_review_path(@item.id) do %>
            <button type="button" class="link-button">レビューを作成</button>
          <% end %>
        </div>
      <% end %>

      <div class="item-information-content">
        <%= link_to user_path(@user), class: "desk-link" do %>
          <div class="profile">
            <%= attachment_image_tag @user, :image, :fill, 80, 80, fallback: "user-icon.png", size: "80x80", class: "user-icon" %>
            <div class="identification">
              <h3 class="user-id">@<%= @user.unique_name %></h3>
              <h3 class="user-name"><%= @user.hundle_name %></h3>
            </div>
          </div>
        <% end %>
      </div>

      <% if current_user.id =! @item.user_id %>
        <div class="center-button">
          <%= link_to :back do %>
            <button type="button" class="back link-button">戻る</button>
          <% end %>
        </div>
      <% end %>

    </div>

  </div>

</div>